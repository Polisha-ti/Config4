Разработать ассемблер и интерпретатор для учебной виртуальной машины (УВМ). Система команд УВМ представлена далее.
Для ассемблера необходимо разработать читаемое представление команд УВМ. Ассемблер принимает на вход файл с текстом исходной программы, путь к которой задается из командной строки. Результатом работы ассемблера является бинарный файл в виде последовательности байт, путь к которому задается из командной строки. Дополнительный ключ командной строки задает путь к файлу- логу, в котором хранятся ассемблированные инструкции в духе списков “ключ=значение”, как в приведенных далее тестах.
Интерпретатор принимает на вход бинарный файл, выполняет команды УВМ и сохраняет в файле-результате значения из диапазона памяти УВМ. Диапазон также указывается из командной строки.
Форматом для файла-лога и файла-результата является xml. 66
Необходимо реализовать приведенные тесты для всех команд, а также написать и отладить тестовую программу.
Загрузка константы
AB
Биты 0—6 Биты 7—16
      116
Константа
Размер команды: 5 байт. Операнд: поле B. Результат: новый элемент на стеке.
Тест (A=116, B=297):
0xF4, 0x94, 0x00, 0x00, 0x00
Чтение значения из памяти
    AB
Биты 0—6 Биты 7—33
    92
Адрес
  Размер команды: 5 байт. Операнд: значение в памяти по адресу, которым является поле B. Результат: новый элемент на стеке.
Тест (A=92, B=676):
     0x5C, 0x52, 0x01, 0x00, 0x00
Запись значения в память
A
Биты 0—6 70
Размер команды: 5 байт. Операнд: элемент, снятый с вершины стека. Результат: значение в памяти по адресу, которым является элемент, снятый с вершины стека.
Тест (A=70):
     0x46, 0x00, 0x00, 0x00, 0x00
    67

Бинарная операция: взятие остатка
AB
Биты 0—6 Биты 7—16
      8
Смещение
  Размер команды: 5 байт. Первый операнд: элемент, снятый с вершины стека. Второй операнд: значение в памяти по адресу, которым является сумма адреса (элемент, снятый с вершины стека) и смещения (поле B). Результат: значение в памяти по адресу, которым является элемент, снятый с вершины стека.
Тест (A=8, B=161):
     0x88, 0x50, 0x00, 0x00, 0x00
Тестовая программа
Выполнить поэлементно операцию взятие остатка над двумя векторами длины 4. Результат записать во второй вектор.
